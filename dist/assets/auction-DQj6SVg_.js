import{r as d,R as y,j as e}from"./index-CF_moJuI.js";import{T as b}from"./ThemeAwareDashboardLayout-C8c2BfhP.js";import{c as A,L as r,I as l,B as h,C,b as k,e as _}from"./index-DTGwnuui.js";import{l as D,m as F,n as L,o as S,p as T,Y as B,B as v,U as E,a8 as P,a9 as R}from"./DashboardLayout-CKMHQjoS.js";import{T as I,c as $}from"./tabs-D8InaDQk.js";import{L as q,g as O,p as U}from"./LoadingSpinner-KqaDx3Fq.js";import{C as V}from"./clock-majiuHbu.js";import{C as H}from"./chevron-up-DvaIEWDb.js";import{C as M}from"./chevron-down-MIaoJtNm.js";/**
 * @license lucide-react v0.394.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=A("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),z=({open:c,onOpenChange:o,onSave:x})=>{const[t,u]=y.useState({origin:"",destination:"",pickup_time:"",delivery_time:"",milage:0,weight:0,dispatcher_notes:"",expires_at:""}),n=(a,j)=>{u(m=>({...m,[a]:j}))},p=()=>{x(t),u({origin:"",destination:"",pickup_time:"",delivery_time:"",milage:0,weight:0,dispatcher_notes:"",expires_at:""})};return e.jsx(D,{open:c,onOpenChange:o,children:e.jsxs(F,{children:[e.jsxs(L,{children:[e.jsx(S,{children:"Add New Auction"}),e.jsx(T,{children:"Enter the details for the new auction. Click save when you're done."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"origin",children:"Origin"}),e.jsx(l,{id:"origin",placeholder:"Origin Location",value:t.origin,onChange:a=>n("origin",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"destination",children:"Destination"}),e.jsx(l,{id:"destination",placeholder:"Destination Location",value:t.destination,onChange:a=>n("destination",a.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"pickup_time",children:"Pickup Time"}),e.jsx(l,{id:"pickup_time",placeholder:"Pickup Time",type:"date",value:t.pickup_time,onChange:a=>n("pickup_time",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"destination",children:"Delivery Time"}),e.jsx(l,{id:"delivery_time",placeholder:"Delivery Time",type:"date",value:t.delivery_time,onChange:a=>n("delivery_time",a.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"milage",children:"Distance"}),e.jsx(l,{id:"milage",placeholder:"",type:"number",value:t.milage,onChange:a=>n("milage",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"weight",children:"Weight"}),e.jsx(l,{id:"weight",placeholder:"",type:"number",value:t.weight,onChange:a=>n("weight",a.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"dispatcher_notes",children:"Notes"}),e.jsx(l,{id:"dispatcher_notes",multiline:!0,rows:4,placeholder:"Your note...",value:t.dispatcher_notes,onChange:a=>n("dispatcher_notes",a.target.value)})]})]}),e.jsxs(B,{children:[e.jsx(h,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(h,{onClick:p,children:"Save Auction"})]})]})})},W=d.memo(z),ie=()=>{const[c,o]=d.useState(null),[x,t]=d.useState([]),[u,n]=d.useState([]),[p,a]=d.useState(!1),[j,m]=d.useState(!1);d.useEffect(()=>{(async()=>{const i=await O("https://api.mjdatsolutions.com/api/auctions"),g=await i.json();if(i.ok){const w=g.data;t(w)}else console.log("failed to fetch auctions:",g)})()},[]);const f=s=>{o(c===s?null:s)},N=async s=>{m(!0);const i=await U("https://api.mjdatsolutions.com/api/auctions",s);i.ok?window.location.reload():console.error("Failed to add auction:",i),m(!1)};return j?e.jsx(q,{}):e.jsx(b,{pageTitle:"Load Auction",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Load Auctions"}),e.jsxs(h,{onClick:()=>a(!0),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Create New Auction"]})]}),e.jsx(I,{defaultValue:"active",className:"w-full",children:e.jsx($,{value:"active",children:e.jsxs(C,{children:[e.jsx(k,{className:"pb-2",children:e.jsx("div",{className:"flex justify-between items-center"})}),e.jsx(_,{children:e.jsx("div",{className:"space-y-4",children:x.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(v,{variant:"outline",children:["#",s.id]}),e.jsx(v,{className:"bg-green-500",children:"Active"})]}),e.jsxs("h3",{className:"font-medium mt-2",children:[s.origin," to ",s.destination]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.offers.length," bids"]})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(V,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Ends in: ",s.expires_at]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>f(s.id),className:"flex items-center gap-1",children:[e.jsx(E,{className:"h-4 w-4 mr-1"}),"View Bidders",c===s.id?e.jsx(H,{className:"h-3 w-3 ml-1"}):e.jsx(M,{className:"h-3 w-3 ml-1"})]})})]}),c===s.id&&e.jsxs("div",{className:"mt-4 border rounded-md bg-background shadow-sm",children:[e.jsx("div",{className:"p-3 border-b bg-muted/50",children:e.jsxs("h4",{className:"font-medium text-sm",children:["Bidders (",s.offers.length,")"]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:s.offers.map(i=>e.jsxs("div",{className:"p-3 border-b last:border-0 hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"h-10 w-10",children:e.jsx(R,{children:i.driver.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.driver.name}),e.jsx("p",{className:"text-xs text-muted-foreground"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["$",i.rate]}),e.jsx("p",{className:"text-xs text-muted-foreground"})]})]}),e.jsx("div",{className:"mt-2 flex items-center justify-between text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:["Email:"," ",e.jsx("span",{className:"font-medium text-foreground",children:i.driver.email})]}),e.jsxs("span",{children:["Phone:"," ",e.jsx("span",{className:"font-medium text-foreground",children:i.driver.phone})]})]})})]},i.driver.id))})]})]},s.id))})})]})})}),p&&e.jsx(W,{open:!0,onOpenChange:s=>a(s),onSave:N})]})})};export{ie as default};
