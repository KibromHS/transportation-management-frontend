import{r as o,R as J,j as e}from"./index-CF_moJuI.js";import{T as te}from"./ThemeAwareDashboardLayout-C8c2BfhP.js";import{c as K,L as t,I as c,B as h,C as b,b as V,d as z,e as k}from"./index-DTGwnuui.js";import{T as re,a as ne,b as E,c as R}from"./tabs-D8InaDQk.js";import{T as P,a as I,b as _,c as m,d as q,e as j}from"./table-dafBRNiR.js";import{l as Q,m as X,n as ee,o as se,p as ae,d as D,e as S,g as T,h as A,i as d,Y as le,aa as ce,q as B,ae as de,Z as H,_ as W,$ as Z,a0 as O,a1 as U,ad as oe,U as he,T as xe}from"./DashboardLayout-CKMHQjoS.js";import{L as ie,g as $,d as Y,p as G}from"./LoadingSpinner-KqaDx3Fq.js";import{F as me}from"./filter-CmfUkVjz.js";import{M as je}from"./map-pin-DG9QdLrP.js";/**
 * @license lucide-react v0.394.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=K("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.394.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=K("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),ye=({open:y,onOpenChange:u,onSave:g})=>{const[i,p]=J.useState({name:"",customer_type:"",address_line1:"",city:"",state:"",zip:"",country:"",phone:"",fax:"",email:"",website:"",billing_method:"",payment_term:"",owner_id:0}),l=(s,x)=>{p(w=>({...w,[s]:x}))},[v,n]=o.useState([]),[f,N]=o.useState(!1),L=()=>{g(i),p({name:"",customer_type:"",address_line1:"",city:"",state:"",zip:"",country:"",phone:"",fax:"",email:"",website:"",billing_method:"",payment_term:"",owner_id:0})};return o.useEffect(()=>{(async()=>{try{const x=await $("https://api.mjdatsolutions.com/api/owners"),w=await x.json();x.ok&&n(w.data)}catch(x){console.error(x)}finally{}})()},[]),f?e.jsx(ie,{}):e.jsx(Q,{open:y,onOpenChange:u,children:e.jsxs(X,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Add New Carrier"}),e.jsx(ae,{children:"Enter the details for the new carrier. Click save when you're done."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Name"}),e.jsx(c,{id:"name",placeholder:"Carrier name",value:i.name,onChange:s=>l("name",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(c,{id:"email",placeholder:"Carrier email",type:"email",value:i.email,onChange:s=>l("email",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"phone",children:"Phone"}),e.jsx(c,{id:"phone",type:"tel",placeholder:"Carrier phone number",value:i.phone,onChange:s=>l("phone",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"address",children:"Address"}),e.jsx(c,{id:"address",placeholder:"City, State",value:i.address_line1,onChange:s=>l("address_line1",s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"city",children:"City"}),e.jsx(c,{id:"city",value:i.city,onChange:s=>l("city",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"state",children:"State"}),e.jsx(c,{id:"state",value:i.state,onChange:s=>l("state",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"zip",children:"Zip"}),e.jsx(c,{id:"zip",value:i.zip,onChange:s=>l("zip",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"country",children:"Country"}),e.jsx(c,{id:"country",value:i.country,onChange:s=>l("country",s.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"owner_id",children:"Owner"}),e.jsxs(D,{value:i.owner_id.toString(),onValueChange:s=>l("owner_id",Number(s)),children:[e.jsx(S,{children:e.jsx(T,{placeholder:""})}),e.jsx(A,{children:v.map(s=>e.jsx(d,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"customer_type",children:"Type"}),e.jsxs(D,{value:i.customer_type,onValueChange:s=>l("customer_type",s),children:[e.jsx(S,{children:e.jsx(T,{placeholder:""})}),e.jsxs(A,{children:[e.jsx(d,{value:"customer",children:"Customer"}),e.jsx(d,{value:"supplier",children:"Supplier"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"billing_method",children:"Billing Method"}),e.jsxs(D,{value:i.billing_method,onValueChange:s=>l("billing_method",s),children:[e.jsx(S,{children:e.jsx(T,{placeholder:""})}),e.jsxs(A,{children:[e.jsx(d,{value:"Factored",children:"Factored"}),e.jsx(d,{value:"Direct",children:"Direct"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"payment_term",children:"Payment Terms"}),e.jsxs(D,{value:i.payment_term,onValueChange:s=>l("payment_term",s),children:[e.jsx(S,{children:e.jsx(T,{placeholder:""})}),e.jsxs(A,{children:[e.jsx(d,{value:"Due on receipt",children:"Due on receipt"}),e.jsx(d,{value:"Net 10",children:"Net 10 Days"}),e.jsx(d,{value:"Net 15",children:"Net 15 Days"}),e.jsx(d,{value:"Net 30",children:"Net 30 Days"}),e.jsx(d,{value:"Net 45",children:"Net 45 Days"}),e.jsx(d,{value:"Net 60",children:"Net 60 Days"})]})]})]})]})]}),e.jsxs(le,{children:[e.jsx(h,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(h,{onClick:L,children:"Save Carrier"})]})]})})},ge=o.memo(ye),ve=({open:y,onOpenChange:u,onSave:g})=>{const[i,p]=J.useState({name:"",address_line1:"",location:""}),l=(n,f)=>{p(N=>({...N,[n]:f}))},v=()=>{g(i),p({name:"",address_line1:"",location:""})};return e.jsx(Q,{open:y,onOpenChange:u,children:e.jsxs(X,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Add New Facility"}),e.jsx(ae,{children:"Enter the details for the new facility. Click save when you're done."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Name"}),e.jsx(c,{id:"name",placeholder:"Facility name",value:i.name,onChange:n=>l("name",n.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"address_line1",children:"Address Line"}),e.jsx(c,{id:"address_line1",value:i.address_line1,onChange:n=>l("address_line1",n.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"location",children:"Location"}),e.jsx(c,{id:"location",value:i.location,onChange:n=>l("location",n.target.value)})]})]}),e.jsxs(le,{children:[e.jsx(h,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(h,{onClick:v,children:"Save Facility"})]})]})})},fe=o.memo(ve),Te=()=>{const[y,u]=o.useState([]),[g,i]=o.useState([]),[p,l]=o.useState(!1),[v,n]=o.useState(!1),[f,N]=o.useState(!1);o.useEffect(()=>{const a=async()=>{const C=await $("https://api.mjdatsolutions.com/api/companies"),F=await C.json();C.ok?i(F.data):console.error("Failed to fetch carriers:",F)},r=async()=>{const C=await $("https://api.mjdatsolutions.com/api/facilities"),F=await C.json();C.ok?u(F.data):console.error("Failed to fetch facilities:",F)};a(),r()},[]);const L=async a=>{l(!0);const r=await G("https://api.mjdatsolutions.com/api/companies",a);r.ok?window.location.reload():console.error("Failed to add carrier:",r),l(!1)},s=async a=>{l(!0);const r=await G("https://api.mjdatsolutions.com/api/facilities",a);r.ok?window.location.reload():console.error("Failed to add facility:",r),l(!1)},x=async a=>{l(!0);const r=await Y(`https://api.mjdatsolutions.com/api/companies/${a}`);r.ok?window.location.reload():console.error("Failed to delete company:",r),l(!1)},w=async a=>{l(!0);const r=await Y(`https://api.mjdatsolutions.com/api/facilities/${a}`);r.ok?window.location.reload():console.error("Failed to delete facility:",r),l(!1)};if(p)return e.jsx(ie,{});const M=a=>{switch(a){case"carrier":return e.jsx(xe,{className:"h-5 w-5 text-blue-500"});case"customer":return e.jsx(he,{className:"h-5 w-5 text-green-500"});case"facility":return e.jsx(pe,{className:"h-5 w-5 text-yellow-500"});case"factoring":return e.jsx(ue,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(oe,{className:"h-5 w-5 text-gray-500"})}};return e.jsx(te,{pageTitle:"Contragents",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Contragents"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs(b,{children:[e.jsx(V,{className:"pb-2",children:e.jsx(z,{className:"text-sm font-medium",children:"Carriers"})}),e.jsxs(k,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active transport partners"})]})]}),e.jsxs(b,{children:[e.jsx(V,{className:"pb-2",children:e.jsx(z,{className:"text-sm font-medium",children:"Facilities"})}),e.jsxs(k,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Warehouses & distribution centers"})]})]})]}),e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ce,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(c,{type:"search",placeholder:"Search contragents...",className:"pl-8"})]}),e.jsx(h,{variant:"outline",size:"icon",children:e.jsx(me,{className:"h-4 w-4"})})]}),e.jsxs(re,{defaultValue:"carriers",className:"w-full",children:[e.jsxs(ne,{className:"grid w-full grid-cols-2",children:[e.jsx(E,{value:"carriers",children:"Carriers"}),e.jsx(E,{value:"facilities",children:"Facilities"})]}),e.jsxs(R,{value:"carriers",className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold"}),e.jsxs(h,{onClick:()=>N(!0),children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Add Carrier"]})]}),e.jsx(b,{children:e.jsx(k,{className:"p-0",children:e.jsxs(P,{children:[e.jsx(I,{children:e.jsxs(_,{children:[e.jsx(m,{children:"Company"}),e.jsx(m,{children:"Contact"}),e.jsx(m,{children:"Location"}),e.jsx(m,{children:"Type"}),e.jsx(m,{})]})}),e.jsx(q,{children:g.map(a=>e.jsxs(_,{children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10",children:M("carrier")}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["CMP-",a.id]})]})]})}),e.jsxs(j,{children:[e.jsx("div",{className:"font-medium",children:a.email}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(de,{className:"h-3 w-3"}),a.phone]})]}),e.jsx(j,{children:a.address_line1}),e.jsx(j,{children:a.customer_type}),e.jsx(j,{children:e.jsxs(H,{children:[e.jsx(W,{asChild:!0,children:e.jsx(h,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(Z,{className:"h-4 w-4"})})}),e.jsx(O,{align:"end",children:e.jsx(U,{onClick:()=>x(a.id),children:"Delete"})})]})})]},a.id))})]})})})]}),e.jsxs(R,{value:"facilities",className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold"}),e.jsxs(h,{onClick:()=>n(!0),children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Add Facility"]})]}),e.jsx(b,{children:e.jsx(k,{className:"p-0",children:e.jsxs(P,{children:[e.jsx(I,{children:e.jsxs(_,{children:[e.jsx(m,{children:"Facility"}),e.jsx(m,{children:"Contact"}),e.jsx(m,{})]})}),e.jsx(q,{children:y.map(a=>e.jsxs(_,{children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10",children:M("facility")}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["FAC-",a.id]})]})]})}),e.jsxs(j,{children:[e.jsx("div",{className:"font-medium",children:a.address_line1}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(je,{className:"h-3 w-3"}),a.location]})]}),e.jsx(j,{children:e.jsxs(H,{children:[e.jsx(W,{asChild:!0,children:e.jsx(h,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(Z,{className:"h-4 w-4"})})}),e.jsx(O,{align:"end",children:e.jsx(U,{onClick:()=>w(a.id),children:"Delete"})})]})})]},a.id))})]})})})]})]}),f&&e.jsx(ge,{onOpenChange:a=>N(a),onSave:L,open:!0}),v&&e.jsx(fe,{onOpenChange:a=>n(a),onSave:s,open:!0})]})})};export{Te as default};
