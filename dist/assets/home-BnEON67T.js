import{j as e,r as n,c as d,S as L,a as E,u as R,b as T}from"./index-CF_moJuI.js";import{c as b,m as p,S as P,C as D,a as $,L as z,I as v,B as N}from"./index-DTGwnuui.js";import{F as O,C as q,u as V,a as B,t as H,o as W,b as J,s as w}from"./index-B8gL9ZK2.js";import{C as U}from"./checkbox-jsghUBLd.js";import{M as Z}from"./mail-Dz_k9LGV.js";import{L as _}from"./lock-BkTkdjKr.js";/**
 * @license lucide-react v0.394.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=b("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.394.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=b("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.394.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=b("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),X=({children:s,title:t="Welcome to TMS",subtitle:a="Sign in to access your account."})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex min-h-screen w-full bg-background",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-blue-900 to-blue-950 text-white p-8 flex-col justify-between",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(p.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center space-x-2",children:[e.jsx(P,{size:32,className:"text-teal-400"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Transport Management System"})]}),e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5},className:"mt-16 space-y-6",children:[e.jsx("h2",{className:"text-4xl font-bold leading-tight",children:"Streamline your operations with our modern transport management platform"}),e.jsx("p",{className:"text-lg text-blue-100 max-w-md",children:"Real-time tracking, task management, and seamless communication"})]})]}),e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},className:"mt-auto space-y-8",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-800/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-teal-400 mb-2",children:"Real-time Updates"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Monitor dispatch status and officer locations in real-time"})]}),e.jsxs("div",{className:"bg-blue-800/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-teal-400 mb-2",children:"Task Management"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Create, assign, and track security tasks efficiently"})]})]})})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:e.jsx(D,{className:"w-full max-w-md p-8 shadow-lg border-0",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:t}),e.jsx("p",{className:"text-muted-foreground",children:a})]}),e.jsx($,{}),s]})})})]})}),Y=O,F=n.createContext({}),h=({...s})=>e.jsx(F.Provider,{value:{name:s.name},children:e.jsx(q,{...s})}),x=()=>{const s=n.useContext(F),t=n.useContext(S),{getFieldState:a,formState:r}=V(),i=a(s.name,r);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:o}=t;return{id:o,name:s.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...i}},S=n.createContext({}),f=n.forwardRef(({className:s,...t},a)=>{const r=n.useId();return e.jsx(S.Provider,{value:{id:r},children:e.jsx("div",{ref:a,className:d("space-y-2",s),...t})})});f.displayName="FormItem";const g=n.forwardRef(({className:s,...t},a)=>{const{error:r,formItemId:i}=x();return e.jsx(z,{ref:a,className:d(r&&"text-destructive",s),htmlFor:i,...t})});g.displayName="FormLabel";const j=n.forwardRef(({...s},t)=>{const{error:a,formItemId:r,formDescriptionId:i,formMessageId:o}=x();return e.jsx(L,{ref:t,id:r,"aria-describedby":a?`${i} ${o}`:`${i}`,"aria-invalid":!!a,...s})});j.displayName="FormControl";const ee=n.forwardRef(({className:s,...t},a)=>{const{formDescriptionId:r}=x();return e.jsx("p",{ref:a,id:r,className:d("text-[0.8rem] text-muted-foreground",s),...t})});ee.displayName="FormDescription";const y=n.forwardRef(({className:s,children:t,...a},r)=>{const{error:i,formMessageId:o}=x(),c=i?String(i==null?void 0:i.message):t;return c?e.jsx("p",{ref:r,id:o,className:d("text-[0.8rem] font-medium text-destructive",s),...a,children:c}):null});y.displayName="FormMessage";const se=E("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),k=n.forwardRef(({className:s,variant:t,...a},r)=>e.jsx("div",{ref:r,role:"alert",className:d(se({variant:t}),s),...a}));k.displayName="Alert";const te=n.forwardRef(({className:s,...t},a)=>e.jsx("h5",{ref:a,className:d("mb-1 font-medium leading-none tracking-tight",s),...t}));te.displayName="AlertTitle";const C=n.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:d("text-sm [&_p]:leading-relaxed",s),...t}));C.displayName="AlertDescription";const ae=W({email:w().min(1,{message:"Email is required"}).email({message:"Invalid email address"}),password:w().min(6,{message:"Password must be at least 6 characters"}),rememberMe:J().optional()}),re=({onSubmit:s,isLoading:t=!1,error:a=""})=>{const[r,i]=n.useState(!1),o=B({resolver:H(ae),defaultValues:{email:"",password:"",rememberMe:!1}}),c=l=>{s(l)};return e.jsxs("div",{className:"space-y-6",children:[a&&e.jsxs(k,{variant:"destructive",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx(C,{children:a})]}),e.jsx(Y,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(c),className:"space-y-4",children:[e.jsx(h,{control:o.control,name:"email",render:({field:l})=>e.jsxs(f,{children:[e.jsx(g,{children:"Email"}),e.jsx(j,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Enter your email",className:"pl-10",...l})]})}),e.jsx(y,{})]})}),e.jsx(h,{control:o.control,name:"password",render:({field:l})=>e.jsxs(f,{children:[e.jsx(g,{children:"Password"}),e.jsx(j,{children:e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(v,{type:r?"text":"password",placeholder:"Enter your password",className:"pl-10",...l}),e.jsxs(N,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-10 w-10",onClick:()=>i(!r),children:[r?e.jsx(K,{className:"h-4 w-4"}):e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:r?"Hide password":"Show password"})]})]})}),e.jsx(y,{})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(h,{control:o.control,name:"rememberMe",render:({field:l})=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:"rememberMe",checked:l.value,onCheckedChange:l.onChange}),e.jsx("label",{htmlFor:"rememberMe",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Remember me"})]})})}),e.jsx(N,{type:"submit",className:"w-full bg-teal-600 hover:bg-teal-700",disabled:t,children:t?"Signing in...":"Sign in"})]})})]})},me=()=>{R();const[s,t]=n.useState(!1),[a,r]=n.useState(""),{login:i}=T(),o=async c=>{t(!0),r("");try{console.log("Login attempt with:",c);const{email:l,password:I}=c,u=await fetch("https://api.mjdatsolutions.com/api/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:l,password:I})}),m=await u.json();if(u.status==200){console.log("login response",m);const{token:M,user:A}=m;i(M,A)}else console.log(u.status,m.message),r(m.message)}catch(l){console.error("Login error:",l),r("Something went wrong. Please try again.")}finally{t(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx(X,{title:"Welcome to TMS",subtitle:"Sign in to access your account.",children:e.jsx(re,{onSubmit:o,isLoading:s,error:a})})})};export{me as default};
