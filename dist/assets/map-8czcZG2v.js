import{r as l,d as L,e as q,j as e,f as J,P as _,g as Q,c as M,T as W}from"./index-CF_moJuI.js";import{B as N,a as X,D as G}from"./DashboardLayout-CKMHQjoS.js";import{u as K,h as Y,B as C,C as y,b as I,d as R,e as T,L as B}from"./index-DTGwnuui.js";import{T as ee,a as se,b as E,c as D}from"./tabs-D8InaDQk.js";import{M as te}from"./map-pin-DG9QdLrP.js";import{T as U}from"./triangle-alert-BvGIUNPI.js";var P="Switch",[ae,pe]=J(P),[ie,re]=ae(P),z=l.forwardRef((t,i)=>{const{__scopeSwitch:a,name:r,checked:c,defaultChecked:g,required:d,disabled:o,value:x="on",onCheckedChange:j,form:m,...n}=t,[v,p]=l.useState(null),b=L(i,f=>p(f)),h=l.useRef(!1),w=v?m||!!v.closest("form"):!0,[u,S]=q({prop:c,defaultProp:g??!1,onChange:j,caller:P});return e.jsxs(ie,{scope:a,checked:u,disabled:o,children:[e.jsx(_.button,{type:"button",role:"switch","aria-checked":u,"aria-required":d,"data-state":V(u),"data-disabled":o?"":void 0,disabled:o,value:x,...n,ref:b,onClick:Q(t.onClick,f=>{S(k=>!k),w&&(h.current=f.isPropagationStopped(),h.current||f.stopPropagation())})}),w&&e.jsx(H,{control:v,bubbles:!h.current,name:r,value:x,checked:u,required:d,disabled:o,form:m,style:{transform:"translateX(-100%)"}})]})});z.displayName=P;var Z="SwitchThumb",A=l.forwardRef((t,i)=>{const{__scopeSwitch:a,...r}=t,c=re(Z,a);return e.jsx(_.span,{"data-state":V(c.checked),"data-disabled":c.disabled?"":void 0,...r,ref:i})});A.displayName=Z;var le="SwitchBubbleInput",H=l.forwardRef(({__scopeSwitch:t,control:i,checked:a,bubbles:r=!0,...c},g)=>{const d=l.useRef(null),o=L(d,g),x=K(a),j=Y(i);return l.useEffect(()=>{const m=d.current;if(!m)return;const n=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(n,"checked").set;if(x!==a&&p){const b=new Event("click",{bubbles:r});p.call(m,a),m.dispatchEvent(b)}},[x,a,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...c,tabIndex:-1,ref:o,style:{...c.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});H.displayName=le;function V(t){return t?"checked":"unchecked"}var F=z,ce=A;const $=l.forwardRef(({className:t,...i},a)=>e.jsx(F,{className:M("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...i,ref:a,children:e.jsx(ce,{className:M("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));$.displayName=F.displayName;const ne=({officers:t=[{id:"o1",name:"John Smith",position:{lat:34.052235,lng:-118.243683},status:"available",lastUpdate:"2023-06-15T10:30:00Z",vehicle:"Patrol Car #12"},{id:"o2",name:"Sarah Johnson",position:{lat:34.053235,lng:-118.253683},status:"busy",lastUpdate:"2023-06-15T10:28:00Z",vehicle:"Patrol Car #08"},{id:"o3",name:"Michael Brown",position:{lat:34.055235,lng:-118.243683},status:"offline",lastUpdate:"2023-06-15T09:15:00Z"},{id:"o4",name:"Emily Davis",position:{lat:34.051235,lng:-118.248683},status:"emergency",lastUpdate:"2023-06-15T10:32:00Z",vehicle:"Patrol Car #05"}],incidents:i=[{id:"i1",title:"Suspicious Activity",description:"Suspicious person reported near main entrance",position:{lat:34.052835,lng:-118.245683},priority:"medium",status:"active",timestamp:"2023-06-15T10:15:00Z",assignedOfficers:["o2"]},{id:"i2",title:"Security Breach",description:"Unauthorized access at south gate",position:{lat:34.050235,lng:-118.241683},priority:"high",status:"active",timestamp:"2023-06-15T10:25:00Z",assignedOfficers:["o4"]},{id:"i3",title:"Parking Violation",description:"Vehicle parked in restricted area",position:{lat:34.053535,lng:-118.246683},priority:"low",status:"resolved",timestamp:"2023-06-15T09:45:00Z",assignedOfficers:[]}],onOfficerSelect:a=()=>{},onIncidentSelect:r=()=>{},onDispatchOfficer:c=()=>{}})=>{const[g,d]=l.useState(14),[o,x]=l.useState(!0),[j,m]=l.useState(!0),[n,v]=l.useState(null),[p,b]=l.useState(null),h=s=>{switch(s){case"available":return"bg-green-500";case"busy":return"bg-yellow-500";case"offline":return"bg-gray-500";case"emergency":return"bg-red-500";default:return"bg-blue-500"}},w=s=>{switch(s){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-blue-500";default:return"bg-gray-500"}},u=s=>new Date(s).toLocaleTimeString(),S=s=>{v(s),a(s)},f=s=>{b(s),r(s)},k=(s,O)=>{c(s,O)};return e.jsxs("div",{className:"h-full flex flex-col bg-background",children:[e.jsxs("div",{className:"flex-1 relative overflow-hidden rounded-lg border",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(te,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Map view would be displayed here with officer and incident markers"})]})}),o&&t.map(s=>e.jsxs("div",{className:"absolute cursor-pointer",style:{left:`${s.position.lng*5-590}px`,top:`${s.position.lat*5-170}px`},onClick:()=>S(s.id),children:[e.jsx("div",{className:`h-4 w-4 rounded-full ${h(s.status)} ring-2 ring-white`}),n===s.id&&e.jsxs("div",{className:"absolute z-10 mt-1 w-48 rounded-md bg-white shadow-lg dark:bg-gray-800 p-2",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.vehicle||"On foot"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(N,{variant:"outline",className:`${h(s.status)} text-white`,children:s.status}),e.jsxs("span",{className:"text-xs ml-2",children:["Updated: ",u(s.lastUpdate)]})]})]})]},s.id)),j&&i.map(s=>e.jsxs("div",{className:"absolute cursor-pointer",style:{left:`${s.position.lng*5-590}px`,top:`${s.position.lat*5-170}px`},onClick:()=>f(s.id),children:[e.jsx("div",{className:`h-5 w-5 ${w(s.priority)} flex items-center justify-center rounded-full`,children:e.jsx(U,{className:"h-3 w-3 text-white"})}),p===s.id&&e.jsxs("div",{className:"absolute z-10 mt-1 w-64 rounded-md bg-white shadow-lg dark:bg-gray-800 p-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"font-medium",children:s.title}),e.jsx(N,{variant:s.status==="active"?"default":"outline",children:s.status})]}),e.jsx("p",{className:"text-xs mt-1",children:s.description}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Reported: ",u(s.timestamp)]}),n&&s.status==="active"&&e.jsx(C,{size:"sm",className:"mt-2 w-full",onClick:()=>k(n,s.id),children:"Dispatch Officer"})]})]},s.id)),e.jsx("div",{className:"absolute bottom-4 right-4 space-y-2",children:e.jsxs(y,{className:"w-10 shadow-md",children:[e.jsx(C,{variant:"ghost",size:"icon",onClick:()=>d(Math.min(g+1,18)),children:"+"}),e.jsx(C,{variant:"ghost",size:"icon",onClick:()=>d(Math.max(g-1,10)),children:"-"})]})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(y,{children:[e.jsx(I,{className:"pb-2",children:e.jsx(R,{className:"text-sm",children:"Map Layers"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{htmlFor:"show-officers",children:"Show Officers"}),e.jsx($,{id:"show-officers",checked:o,onCheckedChange:x})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{htmlFor:"show-incidents",children:"Show Incidents"}),e.jsx($,{id:"show-incidents",checked:j,onCheckedChange:m})]})]})})]}),e.jsxs(y,{className:"col-span-1 md:col-span-2",children:[e.jsx(I,{className:"pb-2",children:e.jsx(R,{className:"text-sm",children:"Quick Stats"})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Officers"}),e.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Available"}),e.jsx("p",{className:"text-2xl font-bold text-green-500",children:t.filter(s=>s.status==="available").length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Active Incidents"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-500",children:i.filter(s=>s.status==="active").length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"High Priority"}),e.jsx("p",{className:"text-2xl font-bold text-red-500",children:i.filter(s=>s.priority==="high"&&s.status==="active").length})]})]})})]})]}),e.jsxs(ee,{defaultValue:"officers",className:"mt-4",children:[e.jsxs(se,{children:[e.jsx(E,{value:"officers",children:"Officers"}),e.jsx(E,{value:"incidents",children:"Incidents"})]}),e.jsx(D,{value:"officers",className:"mt-2",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(s=>e.jsx(y,{className:`cursor-pointer ${n===s.id?"ring-2 ring-primary":""}`,onClick:()=>S(s.id),children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center ${h(s.status)}`,children:e.jsx(X,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.vehicle||"On foot"})]})]}),e.jsx(N,{variant:"outline",className:`${h(s.status)} text-white`,children:s.status})]})})},s.id))})}),e.jsx(D,{value:"incidents",className:"mt-2",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(s=>e.jsx(y,{className:`cursor-pointer ${p===s.id?"ring-2 ring-primary":""}`,onClick:()=>f(s.id),children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-6 w-6 rounded-full flex items-center justify-center ${w(s.priority)}`,children:e.jsx(U,{className:"h-3 w-3 text-white"})}),e.jsx("p",{className:"font-medium ml-2",children:s.title})]}),e.jsx("p",{className:"text-sm mt-1",children:s.description})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx(N,{variant:s.status==="active"?"default":"outline",children:s.status}),e.jsx(N,{variant:"outline",className:"mt-1",children:s.priority})]})]}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Reported: ",u(s.timestamp)]}),s.status==="active"&&n&&e.jsx(C,{size:"sm",onClick:O=>{O.stopPropagation(),k(n,s.id)},children:"Dispatch"})]})]})},s.id))})})]})]})},fe=()=>{const t=r=>{console.log(`Selected officer: ${r}`)},i=r=>{console.log(`Selected incident: ${r}`)},a=(r,c)=>{console.log(`Dispatching officer ${r} to incident ${c}`)};return e.jsx(W,{defaultTheme:"system",enableSystem:!0,children:e.jsx(G,{pageTitle:"Live Map View",children:e.jsx("div",{className:"h-[calc(100vh-12rem)]",children:e.jsx(ne,{onOfficerSelect:t,onIncidentSelect:i,onDispatchOfficer:a})})})})};export{fe as default};
